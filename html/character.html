<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character</title>
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
</head>
<body>
    <div id="app">
        <b-navbar toggleable="lg" type="dark" variant="danger">
            <b-navbar-brand href="/dev/home">D&D Group Finder</b-navbar-brand>

            <b-navbar-toggle target="nav-collapse"></b-navbar-toggle>

            <b-collapse id="nav-collapse" is-nav>
                <b-navbar-nav>
                    <b-nav-item href="/dev/search">Groups</b-nav-item>
                    <b-nav-item href="#">Rules</b-nav-item>
                </b-navbar-nav>

            <!-- Right aligned nav items -->
                <b-navbar-nav class="ml-auto">
                    <b-nav-item-dropdown right>
                        <!-- Using 'button-content' slot -->
                        <template #button-content>
                            <em>User</em>
                        </template>
                            <b-dropdown-item href="/dev/user-page?userId=1">Profile</b-dropdown-item>
                            <b-dropdown-item href="#">Logout</b-dropdown-item>
                    </b-nav-item-dropdown>
                </b-navbar-nav>
            </b-collapse>
        </b-navbar>
    <div class="text-center" v-if="loading">
      <b-spinner></b-spinner>
    </div>
    <b-card text-variant="danger" :title="character.char_name" :sub-title="character.user_name">
      <b-card-text>
        <b-link :href="'/dev/group-page?groupId=' + character.group_id">{{character.group_name}}</b-link>
      </b-card-text>
      <b-card-text>
          Stats
          <b-list-group-item>Race: {{character.race}}</b-list-group-item>
          <b-list-group-item>Class: {{character.class}}</b-list-group-item>
          <b-list-group-item>Strength: {{character.strength}}</b-list-group-item>
          <b-list-group-item>Dexterity: {{character.dexterity}}</b-list-group-item>
          <b-list-group-item>Constitution: {{character.constitution}}</b-list-group-item>
          <b-list-group-item>Intelligence: {{character.intelligence}}</b-list-group-item>
          <b-list-group-item>Wisdom: {{character.wisdom}}</b-list-group-item>
          <b-list-group-item>Charisma: {{character.charisma}}</b-list-group-item>
        </b-card-text>
    </b-card>
    </div>
</body>
</html>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                charId: location.href.split('?')[1].split('&')[0].split('=')[1],
                character: '',
                loading: false
            }
        },
        mounted: function() {
            this.getChar();
            this.loading = true;
        },
        methods: {
            getChar() {
                axios.get(`/dev/character/${this.charId}`)
                .then(response => (this.character = response.data[0], this.loading = false),
                (error) => {
                    console.error(error);
                }); 
            },
        }
    })
</script>